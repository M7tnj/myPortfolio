<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 4: Discourse Types | Interactive Learning Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Scrollbar for cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f5f5f4;
        }
        ::-webkit-scrollbar-thumb {
            background: #d6d3d1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a29e;
        }

        /* Chart Container Strict Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 40vh;
            min-height: 350px;
            max-height: 500px;
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals & Earth Tones (Stone background, Burnt Orange accents, Charcoal text) -->
    <!-- Application Structure Plan: The app is designed as a "Discourse Classification Laboratory". It moves from the abstract (Definitions) to the concrete (Examples) and then to the analytical (Data Dimensions). 
         1. Introduction: Sets the stage regarding the complexity of classifying text.
         2. The Text Type Framework (Werlich): Uses an interactive card system to explore the 5 fundamental cognitive modes.
         3. Multi-Dimensional Analysis (Biber): Uses a Radar Chart to visualize how different genres score on linguistic dimensions (narrative, involved, etc.). This allows users to "see" the difference between speech and writing.
         4. Register Theory (Halliday): A functional dashboard to manipulate Field, Tenor, and Mode.
         5. Genre Hybridity: A concluding section on how types mix.
         This structure helps the user build a mental model: Start with basic blocks (Types) -> Measure them (Dimensions) -> Apply context (Register). -->
    <!-- Visualization & Content Choices: 
         1. Werlich's Types -> Interactive Cards -> To allow users to focus on one definition at a time without overwhelming text.
         2. Biber's Dimensions -> Radar Chart (Chart.js) -> Chosen because Biber's analysis is multi-factorial. A radar chart perfectly illustrates the "shape" of a text type across multiple axes.
         3. Register Analysis -> Dynamic Text Injection -> Users click buttons to change context variables, immediately seeing the definition update.
         4. Genre Mix -> Donut Chart -> To visualize that most real-world texts (like an advertorial) are a percentage mix of different pure types.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-stone-50 text-stone-800 font-sans antialiased selection:bg-orange-200 selection:text-orange-900">

    <!-- Navigation / Header -->
    <header class="bg-white border-b border-stone-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold tracking-tight text-stone-900">Discourse<span class="text-orange-600">Lab</span></span>
                    <span class="ml-3 px-2 py-1 text-xs font-semibold bg-stone-100 text-stone-600 rounded border border-stone-200 hidden sm:inline-block">Chapter 4 Summary</span>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <button onclick="scrollToSection('intro')" class="text-stone-500 hover:text-orange-600 font-medium transition-colors">Introduction</button>
                    <button onclick="scrollToSection('types')" class="text-stone-500 hover:text-orange-600 font-medium transition-colors">Werlich's Types</button>
                    <button onclick="scrollToSection('dimensions')" class="text-stone-500 hover:text-orange-600 font-medium transition-colors">Biber's Dimensions</button>
                    <button onclick="scrollToSection('register')" class="text-stone-500 hover:text-orange-600 font-medium transition-colors">Register</button>
                </nav>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-20">

        <!-- Section 1: Introduction & The Core Problem -->
        <section id="intro" class="fade-in">
            <div class="text-center max-w-3xl mx-auto mb-12">
                <h1 class="text-4xl md:text-5xl font-extrabold text-stone-900 mb-6 tracking-tight">Classifying Discourse</h1>
                <p class="text-xl text-stone-600 leading-relaxed">
                    How do we distinguish a recipe from a sermon, or a chat from a lecture? Chapter 4 explores the taxonomy of discourse. It moves beyond simple labels to analyze the underlying <strong>cognitive processes</strong> (Text Types) and <strong>social purposes</strong> (Genres).
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center bg-white rounded-2xl shadow-sm border border-stone-200 p-8">
                <div>
                    <h2 class="text-2xl font-bold text-stone-800 mb-4">Genre vs. Text Type</h2>
                    <p class="text-stone-600 mb-4">
                        One of the most critical distinctions in Chapter 4 is between <em>Genre</em> and <em>Text Type</em>. They are often used interchangeably, but Renkema argues for a strict separation based on criteria.
                    </p>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-6 w-6 flex items-center justify-center rounded-full bg-orange-100 text-orange-600 font-bold mt-1">G</span>
                            <div class="ml-4">
                                <p class="font-bold text-stone-900">Genre (The "Why")</p>
                                <p class="text-sm text-stone-500">Classified by social purpose and culture. Examples: <em>Novel, Abstract, Recipe, Sermon.</em></p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-6 w-6 flex items-center justify-center rounded-full bg-stone-200 text-stone-700 font-bold mt-1">T</span>
                            <div class="ml-4">
                                <p class="font-bold text-stone-900">Text Type (The "How")</p>
                                <p class="text-sm text-stone-500">Classified by linguistic structure and cognitive mode. Examples: <em>Narrative, Argumentative, Descriptive.</em></p>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="bg-stone-50 p-6 rounded-xl border border-stone-100 relative overflow-hidden">
                    <div class="absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-orange-100 rounded-full opacity-50"></div>
                    <h3 class="text-lg font-semibold text-stone-800 mb-3 z-10 relative">Analogy: Architecture</h3>
                    <p class="text-stone-600 italic mb-4 relative z-10">
                        "A <strong>Genre</strong> is like the building's function (School, Hospital, Home). A <strong>Text Type</strong> is the building material (Brick, Glass, Concrete)."
                    </p>
                    <div class="mt-4 p-4 bg-white rounded border-l-4 border-orange-500 shadow-sm">
                        <p class="text-sm font-medium text-stone-800">Key Takeaway:</p>
                        <p class="text-sm text-stone-500">A single Genre (e.g., a News Article) can contain multiple Text Types (Narrative paragraphs + Descriptive paragraphs).</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Werlich's 5 Text Types -->
        <section id="types" class="fade-in">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-stone-900 mb-3">Werlich's 5 Text Types</h2>
                <p class="text-lg text-stone-600 max-w-4xl">
                    Egon Werlich proposed a highly influential typology based on <strong>cognitive processes</strong> of the human mind. Explore the 5 types below to see how our brain's focus shapes the text we produce.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Navigation List -->
                <div class="space-y-3 lg:col-span-1">
                    <button onclick="updateWerlich('descriptive')" id="btn-descriptive" class="werlich-btn w-full text-left px-6 py-4 rounded-xl bg-white border border-stone-200 shadow-sm hover:shadow-md transition-all flex items-center justify-between group active-type">
                        <span class="font-bold text-stone-700 group-hover:text-orange-600">1. Descriptive</span>
                        <span class="text-stone-400 group-hover:text-orange-500">üëÅÔ∏è</span>
                    </button>
                    <button onclick="updateWerlich('narrative')" id="btn-narrative" class="werlich-btn w-full text-left px-6 py-4 rounded-xl bg-white border border-stone-200 shadow-sm hover:shadow-md transition-all flex items-center justify-between group">
                        <span class="font-bold text-stone-700 group-hover:text-orange-600">2. Narrative</span>
                        <span class="text-stone-400 group-hover:text-orange-500">‚è±Ô∏è</span>
                    </button>
                    <button onclick="updateWerlich('expository')" id="btn-expository" class="werlich-btn w-full text-left px-6 py-4 rounded-xl bg-white border border-stone-200 shadow-sm hover:shadow-md transition-all flex items-center justify-between group">
                        <span class="font-bold text-stone-700 group-hover:text-orange-600">3. Expository</span>
                        <span class="text-stone-400 group-hover:text-orange-500">üß†</span>
                    </button>
                    <button onclick="updateWerlich('argumentative')" id="btn-argumentative" class="werlich-btn w-full text-left px-6 py-4 rounded-xl bg-white border border-stone-200 shadow-sm hover:shadow-md transition-all flex items-center justify-between group">
                        <span class="font-bold text-stone-700 group-hover:text-orange-600">4. Argumentative</span>
                        <span class="text-stone-400 group-hover:text-orange-500">‚öñÔ∏è</span>
                    </button>
                    <button onclick="updateWerlich('instructive')" id="btn-instructive" class="werlich-btn w-full text-left px-6 py-4 rounded-xl bg-white border border-stone-200 shadow-sm hover:shadow-md transition-all flex items-center justify-between group">
                        <span class="font-bold text-stone-700 group-hover:text-orange-600">5. Instructive</span>
                        <span class="text-stone-400 group-hover:text-orange-500">üëâ</span>
                    </button>
                </div>

                <!-- Display Panel -->
                <div class="lg:col-span-2 bg-white rounded-2xl border border-stone-200 shadow-lg p-8 flex flex-col justify-between h-full relative overflow-hidden transition-all duration-300" id="werlich-panel">
                    <div class="absolute top-0 right-0 p-4 opacity-10 text-9xl font-black text-stone-900 pointer-events-none" id="werlich-icon">üëÅÔ∏è</div>
                    
                    <div>
                        <div class="flex items-center space-x-3 mb-2">
                            <span class="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-bold uppercase tracking-wide">Focus</span>
                            <span class="text-stone-400 text-sm font-medium" id="werlich-focus">Phenomenal (Space)</span>
                        </div>
                        <h3 class="text-3xl font-bold text-stone-900 mb-6" id="werlich-title">Descriptive Type</h3>
                        
                        <div class="prose prose-stone mb-6">
                            <p class="text-lg text-stone-600" id="werlich-desc">
                                Focuses on factual phenomena in a spatial context. It deals with the perception of space and the arrangement of objects or people within it.
                            </p>
                        </div>
                    </div>

                    <div class="bg-stone-50 rounded-xl p-5 border-l-4 border-orange-500">
                        <h4 class="text-sm font-bold text-stone-400 uppercase mb-2">Linguistic Markers</h4>
                        <p class="text-stone-700 italic font-serif" id="werlich-markers">
                            Locative adverbs (left, right, above), existential verbs (be, exist), state adjectives.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Biber's Multi-Dimensional Analysis -->
        <section id="dimensions" class="bg-stone-900 rounded-3xl p-8 md:p-12 text-white fade-in shadow-2xl">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <span class="h-3 w-3 bg-blue-400 rounded-full"></span>
                        <span class="text-blue-200 text-sm font-semibold tracking-wider uppercase">Quantitative Linguistics</span>
                    </div>
                    <h2 class="text-3xl md:text-4xl font-bold mb-6">Biber's Multi-Dimensional Analysis</h2>
                    <p class="text-stone-300 mb-6 leading-relaxed">
                        Douglas Biber proved that we cannot just split texts into "Speech" vs "Writing." Instead, texts vary across multiple linguistic dimensions simultaneously.
                    </p>
                    <p class="text-stone-400 text-sm mb-8">
                        The chart maps how two different genres score on Biber's dimensions. Notice how "Conversation" is highly involved but non-abstract, whereas "Academic Prose" is the opposite.
                    </p>
                    
                    <!-- Controls -->
                    <div class="bg-stone-800 p-6 rounded-xl border border-stone-700">
                        <h4 class="text-white font-bold mb-4">Compare Genres:</h4>
                        <div class="flex flex-wrap gap-3">
                            <button onclick="updateChartData('convo_academic')" class="px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded text-sm font-medium transition-colors text-white">Conversation vs. Academic</button>
                            <button onclick="updateChartData('fiction_news')" class="px-4 py-2 bg-stone-700 hover:bg-stone-600 rounded text-sm font-medium transition-colors text-stone-200">Fiction vs. News</button>
                        </div>
                        <div class="mt-4 pt-4 border-t border-stone-700">
                             <p class="text-xs text-stone-500 mt-2">
                                <strong class="text-stone-300">Dimension 1 (Involved):</strong> Private verbs, contractions, 1st person pronouns.<br>
                                <strong class="text-stone-300">Dimension 2 (Narrative):</strong> Past tense, 3rd person pronouns.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Radar Chart Container -->
                <div class="bg-stone-800 rounded-2xl p-4 border border-stone-700 shadow-inner flex flex-col justify-center items-center">
                    <div class="chart-container">
                        <canvas id="biberChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Register (Halliday) -->
        <section id="register" class="fade-in">
             <div class="mb-10 text-center">
                <h2 class="text-3xl font-bold text-stone-900 mb-3">Register & Situation</h2>
                <p class="text-lg text-stone-600 max-w-2xl mx-auto">
                    According to Halliday's Systemic Functional Linguistics, the type of language we use (Register) is determined by three variables of the context of situation. Adjust the variables below to see how they shape discourse.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Field Card -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 card-hover">
                    <div class="h-12 w-12 bg-green-100 text-green-600 rounded-lg flex items-center justify-center text-2xl mb-4">üåç</div>
                    <h3 class="text-xl font-bold text-stone-800 mb-2">Field</h3>
                    <p class="text-sm text-stone-500 mb-4 h-10">What is happening? The topic and nature of the activity.</p>
                    <select id="select-field" onchange="updateRegister()" class="w-full p-2 bg-stone-50 border border-stone-200 rounded text-stone-700 focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="science">Scientific Research</option>
                        <option value="cooking">Cooking Dinner</option>
                        <option value="politics">Political Debate</option>
                    </select>
                </div>

                <!-- Tenor Card -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 card-hover">
                    <div class="h-12 w-12 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center text-2xl mb-4">üë•</div>
                    <h3 class="text-xl font-bold text-stone-800 mb-2">Tenor</h3>
                    <p class="text-sm text-stone-500 mb-4 h-10">Who is taking part? The relationship between participants.</p>
                    <select id="select-tenor" onchange="updateRegister()" class="w-full p-2 bg-stone-50 border border-stone-200 rounded text-stone-700 focus:outline-none focus:ring-2 focus:ring-purple-500">
                        <option value="expert">Expert to Novice</option>
                        <option value="friend">Friend to Friend</option>
                        <option value="formal">Official to Public</option>
                    </select>
                </div>

                <!-- Mode Card -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 card-hover">
                    <div class="h-12 w-12 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center text-2xl mb-4">üì°</div>
                    <h3 class="text-xl font-bold text-stone-800 mb-2">Mode</h3>
                    <p class="text-sm text-stone-500 mb-4 h-10">What role is language playing? The channel (written/spoken).</p>
                    <select id="select-mode" onchange="updateRegister()" class="w-full p-2 bg-stone-50 border border-stone-200 rounded text-stone-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="written">Written/Reflected</option>
                        <option value="spoken">Spoken/Spontaneous</option>
                        <option value="digital">Digital/Instant</option>
                    </select>
                </div>
            </div>

            <!-- Dynamic Result Box -->
            <div class="mt-8 bg-stone-800 rounded-2xl p-8 text-center text-white shadow-xl transition-all" id="register-result">
                <p class="text-stone-400 uppercase tracking-widest text-xs font-bold mb-4">Predicted Text Output</p>
                <div id="register-output" class="text-xl md:text-2xl font-serif italic leading-relaxed">
                    "Select options above to generate a text sample."
                </div>
                <div class="mt-6 flex justify-center space-x-2">
                    <span id="tag-field" class="px-3 py-1 bg-stone-700 rounded-full text-xs text-stone-300">Topic</span>
                    <span id="tag-tenor" class="px-3 py-1 bg-stone-700 rounded-full text-xs text-stone-300">Relation</span>
                    <span id="tag-mode" class="px-3 py-1 bg-stone-700 rounded-full text-xs text-stone-300">Channel</span>
                </div>
            </div>
        </section>

        <!-- Section 5: Hybridity Visualization -->
        <section class="fade-in">
             <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center bg-white rounded-3xl p-8 border border-stone-200 shadow-sm">
                <div>
                    <h2 class="text-2xl font-bold text-stone-900 mb-4">Textual Hybridity</h2>
                    <p class="text-stone-600 mb-6">
                        Pure text types rarely exist in isolation. Most discourses are <strong>Hybrids</strong>. This chart shows the composition of an "Advertorial" (Advertisement + Editorial).
                    </p>
                    <ul class="space-y-2 text-sm text-stone-600">
                        <li class="flex items-center"><span class="w-3 h-3 rounded-full bg-orange-500 mr-2"></span> <strong>Argumentative (40%):</strong> Persuading to buy.</li>
                        <li class="flex items-center"><span class="w-3 h-3 rounded-full bg-blue-500 mr-2"></span> <strong>Expository (30%):</strong> Explaining the product features.</li>
                        <li class="flex items-center"><span class="w-3 h-3 rounded-full bg-green-500 mr-2"></span> <strong>Descriptive (20%):</strong> Describing the look/feel.</li>
                        <li class="flex items-center"><span class="w-3 h-3 rounded-full bg-yellow-500 mr-2"></span> <strong>Narrative (10%):</strong> User testimonials/stories.</li>
                    </ul>
                </div>
                <div class="flex justify-center">
                    <div class="chart-container" style="height: 300px; max-width: 300px;">
                        <canvas id="hybridChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-stone-900 text-stone-400 py-12 mt-20">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="font-bold text-white mb-2">Introduction to Discourse Studies</p>
            <p class="text-sm">Based on Chapter 4: Discourse Types</p>
            <p class="text-xs mt-8 text-stone-600">Interactive Summary Generated for Educational Purposes.</p>
        </div>
    </footer>

    <script>
        // --- DATA & STATE MANAGEMENT ---

        // 1. Werlich's Text Types Data
        const werlichData = {
            descriptive: {
                title: "Descriptive Type",
                focus: "Phenomenal (Space)",
                icon: "üëÅÔ∏è",
                desc: "Focuses on factual phenomena in a spatial context. It deals with the perception of space and the arrangement of objects, people, or atmosphere within it.",
                markers: "Locative adverbs (left, right, above), existential verbs (be, exist), state adjectives."
            },
            narrative: {
                title: "Narrative Type",
                focus: "Temporal (Time)",
                icon: "‚è±Ô∏è",
                desc: "Focuses on factual or conceptual phenomena in time. It deals with the sequencing of events and actions.",
                markers: "Action verbs, temporal adverbs (then, after, suddenly), past tense."
            },
            expository: {
                title: "Expository Type",
                focus: "Comprehension (Analysis)",
                icon: "üß†",
                desc: "Focuses on analyzing concepts or deconstructing constituent elements. It explains 'how' or 'why' something is the way it is (definitions, explications).",
                markers: "State verbs, causal connectors (because, since), general nouns."
            },
            argumentative: {
                title: "Argumentative Type",
                focus: "Judging (Evaluation)",
                icon: "‚öñÔ∏è",
                desc: "Focuses on the relations between concepts to advocate a position. It proposes relations between concepts through evaluation.",
                markers: "Evaluative adjectives, modal verbs (must, should), concessive connectors (however, although)."
            },
            instructive: {
                title: "Instructive Type",
                focus: "Planning (Future Action)",
                icon: "üëâ",
                desc: "Focuses on future behavior. It tells the receiver what to do.",
                markers: "Imperatives, modal auxiliaries, linear enumeration (first, second)."
            }
        };

        // 2. Biber's Dimensions Data
        // D1: Involved vs Informational | D2: Narrative vs Non-Narrative | D3: Explicit vs Situation-Dependent
        const biberDataSets = {
            convo_academic: {
                labels: ['Involvedness', 'Narrative', 'Elaborated Ref.', 'Overt Persuasion', 'Abstractness'],
                datasets: [
                    {
                        label: 'Conversation',
                        data: [35, 15, -5, 5, -10],
                        fill: true,
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: 'rgb(59, 130, 246)',
                        pointBackgroundColor: 'rgb(59, 130, 246)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(59, 130, 246)'
                    },
                    {
                        label: 'Academic Prose',
                        data: [-15, -5, 15, 0, 25],
                        fill: true,
                        backgroundColor: 'rgba(234, 88, 12, 0.2)',
                        borderColor: 'rgb(234, 88, 12)',
                        pointBackgroundColor: 'rgb(234, 88, 12)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(234, 88, 12)'
                    }
                ]
            },
            fiction_news: {
                labels: ['Involvedness', 'Narrative', 'Elaborated Ref.', 'Overt Persuasion', 'Abstractness'],
                datasets: [
                    {
                        label: 'Fiction',
                        data: [10, 30, -2, 2, -5],
                        fill: true,
                        backgroundColor: 'rgba(16, 185, 129, 0.2)',
                        borderColor: 'rgb(16, 185, 129)',
                        pointBackgroundColor: 'rgb(16, 185, 129)',
                        pointBorderColor: '#fff'
                    },
                    {
                        label: 'Official Documents',
                        data: [-10, -10, 10, 5, 15],
                        fill: true,
                        backgroundColor: 'rgba(99, 102, 241, 0.2)',
                        borderColor: 'rgb(99, 102, 241)',
                        pointBackgroundColor: 'rgb(99, 102, 241)',
                        pointBorderColor: '#fff'
                    }
                ]
            }
        };

        // --- FUNCTIONS ---

        // Navigation
        function scrollToSection(id) {
            const element = document.getElementById(id);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Werlich Type Updater
        function updateWerlich(type) {
            // Update UI State
            document.querySelectorAll('.werlich-btn').forEach(btn => {
                btn.classList.remove('border-orange-500', 'bg-orange-50');
                btn.classList.add('bg-white', 'border-stone-200');
            });
            const activeBtn = document.getElementById(`btn-${type}`);
            activeBtn.classList.remove('bg-white', 'border-stone-200');
            activeBtn.classList.add('border-orange-500', 'bg-orange-50');

            // Update Content
            const data = werlichData[type];
            const panel = document.getElementById('werlich-panel');
            
            // Simple fade effect
            panel.style.opacity = '0';
            setTimeout(() => {
                document.getElementById('werlich-title').innerText = data.title;
                document.getElementById('werlich-focus').innerText = data.focus;
                document.getElementById('werlich-desc').innerText = data.desc;
                document.getElementById('werlich-markers').innerText = data.markers;
                document.getElementById('werlich-icon').innerText = data.icon;
                panel.style.opacity = '1';
            }, 200);
        }

        // Register Logic
        function updateRegister() {
            const f = document.getElementById('select-field').value;
            const t = document.getElementById('select-tenor').value;
            const m = document.getElementById('select-mode').value;
            const output = document.getElementById('register-output');

            // Logic Matrix (Simplified for demo purposes)
            let text = "";
            
            // Science
            if (f === 'science') {
                if (t === 'expert' && m === 'written') text = "The empirical data suggests a correlation between variable X and Y (p < 0.05). Future studies should address...";
                else if (t === 'friend' && m === 'spoken') text = "So, I ran the numbers and honestly, it looks like they're connected, which is super cool.";
                else text = "Research indicates that these elements are linked.";
            }
            // Cooking
            else if (f === 'cooking') {
                if (m === 'written' && t === 'expert') text = "Preheat oven to 200¬∞C. Julienne the carrots precisely. Reduction of the sauce is critical.";
                else if (m === 'spoken' && t === 'friend') text = "Dude, just throw the carrots in. Make sure the oven is hot enough!";
                else text = "Cook the carrots in the oven until done.";
            }
            // Politics
            else {
                if (t === 'formal' && m === 'spoken') text = "My fellow citizens, we stand today at a crossroads of history requiring decisive action.";
                else if (m === 'digital') text = "Vote NO on Prop 5! #Election2025 #Vote";
                else text = "The political situation requires attention.";
            }

            output.innerText = `"${text}"`;
            
            document.getElementById('tag-field').innerText = f.toUpperCase();
            document.getElementById('tag-tenor').innerText = t.toUpperCase();
            document.getElementById('tag-mode').innerText = m.toUpperCase();
        }

        // --- CHART INITIALIZATION ---

        let radarChartInstance = null;

        document.addEventListener('DOMContentLoaded', () => {
            // 1. Initialize Werlich
            updateWerlich('descriptive');
            // 2. Initialize Register
            updateRegister();

            // 3. Initialize Biber Chart (Radar)
            const radarCtx = document.getElementById('biberChart').getContext('2d');
            
            // Chart Defaults for dark theme
            Chart.defaults.color = '#a8a29e';
            Chart.defaults.borderColor = '#44403c';

            radarChartInstance = new Chart(radarCtx, {
                type: 'radar',
                data: biberDataSets.convo_academic,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#57534e' },
                            grid: { color: '#44403c' },
                            pointLabels: {
                                color: '#e7e5e4',
                                font: { size: 12, weight: 'bold' }
                            },
                            ticks: { display: false, backdropColor: 'transparent' }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: { color: '#fff', font: { size: 14 } }
                        }
                    }
                }
            });

            // 4. Initialize Hybrid Donut Chart
            const hybridCtx = document.getElementById('hybridChart').getContext('2d');
            new Chart(hybridCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Argumentative', 'Expository', 'Descriptive', 'Narrative'],
                    datasets: [{
                        data: [40, 30, 20, 10],
                        backgroundColor: ['#f97316', '#3b82f6', '#22c55e', '#eab308'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.raw + '%';
                                }
                            }
                        }
                    }
                }
            });
        });

        // Update Radar Chart Data
        function updateChartData(key) {
            const newData = biberDataSets[key];
            radarChartInstance.data = newData;
            radarChartInstance.update();
        }

    </script>
</body>
</html>
